<div class="bg-blue-50 border border-blue-200 rounded-lg p-4" id="collection-info-section">
    <h3 class="text-sm font-medium text-blue-900 mb-3">In Your Collection</h3>
    <div class="space-y-3">
        <div class="grid grid-cols-2 gap-4">
            <div>
                <dt class="text-sm font-medium text-blue-700">Quantity</dt>
                <dd class="text-sm text-blue-900">
                    <div class="flex items-center space-x-2 mt-1">
                        <!-- Quantity controls -->
                        <button 
                            hx-patch="/api/collection/{{ collection_entry.id }}"
                            hx-vals='{"qty": {{ collection_entry.qty - 1 }}}'
                            hx-target="#collection-info-section"
                            hx-swap="outerHTML"
                            hx-indicator="#global-loading"
                            hx-on::after-request="htmx.trigger('#collection-table', 'refresh-table')"
                            {% if collection_entry.qty <= 1 %}
                            hx-confirm="This will remove the card from your collection. Are you sure?"
                            {% endif %}
                            class="w-6 h-6 rounded-full bg-blue-200 hover:bg-blue-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-sm font-medium text-blue-800 transition-colors"
                        >
                            âˆ’
                        </button>
                        <span class="text-sm font-bold text-blue-900 min-w-[2rem] text-center">{{ collection_entry.qty }}</span>
                        <button 
                            hx-patch="/api/collection/{{ collection_entry.id }}"
                            hx-vals='{"qty": {{ collection_entry.qty + 1 }}}'
                            hx-target="#collection-info-section"
                            hx-swap="outerHTML"
                            hx-indicator="#global-loading"
                            hx-on::after-request="htmx.trigger('#collection-table', 'refresh-table')"
                            class="w-6 h-6 rounded-full bg-blue-200 hover:bg-blue-300 flex items-center justify-center text-sm font-medium text-blue-800 transition-colors"
                        >
                            +
                        </button>
                    </div>
                </dd>
            </div>
            <div>
                <dt class="text-sm font-medium text-blue-700">Condition</dt>
                <dd class="text-sm text-blue-900">
                    <select 
                        hx-patch="/api/collection/{{ collection_entry.id }}"
                        hx-vals='js:{"condition": event.target.value}'
                        hx-target="#collection-info-section"
                        hx-swap="outerHTML"
                        hx-indicator="#global-loading"
                        hx-trigger="change"
                        hx-on::after-request="htmx.trigger('#collection-table', 'refresh-table')"
                        class="text-sm bg-blue-50 border border-blue-200 rounded px-2 py-1 text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    >
                        <option value="NM" {% if collection_entry.condition.value == 'NM' %}selected{% endif %}>NM (Near Mint)</option>
                        <option value="LP" {% if collection_entry.condition.value == 'LP' %}selected{% endif %}>LP (Lightly Played)</option>
                        <option value="MP" {% if collection_entry.condition.value == 'MP' %}selected{% endif %}>MP (Moderately Played)</option>
                        <option value="HP" {% if collection_entry.condition.value == 'HP' %}selected{% endif %}>HP (Heavily Played)</option>
                        <option value="DMG" {% if collection_entry.condition.value == 'DMG' %}selected{% endif %}>DMG (Damaged)</option>
                        <option value="GRADED" {% if collection_entry.condition.value == 'GRADED' %}selected{% endif %}>GRADED</option>
                        <option value="UNKNOWN" {% if collection_entry.condition.value == 'UNKNOWN' %}selected{% endif %}>UNKNOWN</option>
                    </select>
                </dd>
            </div>
        </div>
        
        {% if collection_entry.variant %}
        <div>
            <dt class="text-sm font-medium text-blue-700">Variant</dt>
            <dd class="text-sm text-blue-900">{{ collection_entry.variant }}</dd>
        </div>
        {% endif %}
        
        {% if collection_entry.purchase_price_cents %}
        <div>
            <dt class="text-sm font-medium text-blue-700">Purchase Price</dt>
            <dd class="text-sm text-blue-900">${{ "%.2f"|format(collection_entry.purchase_price_cents / 100) }}</dd>
        </div>
        {% endif %}
        
        {% if collection_entry.notes %}
        <div>
            <dt class="text-sm font-medium text-blue-700">Notes</dt>
            <dd class="text-sm text-blue-900">{{ collection_entry.notes }}</dd>
        </div>
        {% endif %}
        
        {% if collection_entry.tags %}
        <div>
            <dt class="text-sm font-medium text-blue-700">Tags</dt>
            <dd class="text-sm text-blue-900">
                <div class="flex flex-wrap gap-1 mt-1">
                    {% for tag in collection_entry.tags %}
                    <span class="inline-flex px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded">
                        {{ tag }}
                    </span>
                    {% endfor %}
                </div>
            </dd>
        </div>
        {% endif %}
    </div>
</div>
